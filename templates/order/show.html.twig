{% extends 'base.html.twig' %}

{% block title %}{{ 'app.order.show.title'|trans({'id': order.externalId}) }} | {{ parent() }}{% endblock %}

{% block body %}
	<h2>{{ 'app.order.show.heading'|trans({'id': order.externalId}) }}</h2>

	<div class="table-responsive">
		<table class="table">
			<tbody>
				<tr>
					<th>{{ 'app.fields.order.createdAt.label'|trans }}</th>
					<td colspan="3">{{ order.createdAt ? order.createdAt|date('Y-m-d H:i:s') : '' }}</td>
				</tr>
				{%- set total = 0 -%}
				{% for line in order.lines %}
				<tr>
					<td>{{ line.item.title }}</td>
					<td class="text-end">{{ line.item.price|number_format(2, ',') -}}</td>
					<td class="text-end">{{ line.quantity }}</td>
					<td class="text-end">{{ line.amount|number_format(2, ',') -}}
						{%- if not line.item.pack %}
						{%- set total = total + line.amount %}
						{%- endif %}</td>
				</tr>
				{% endfor %}
			</tbody>
			<tfoot>
				<tr>
					<th>{{ 'app.order.show.total'|trans }}</th>
					<td colspan="2">{{ order.paymentMethod.title }}</td>
					<td class="text-end">{{ total|number_format(2, ',') }}</td>
				</tr>
			</tfoot>
		</table>
	</div>

	<ul class="list-inline float-end">
		<li class="list-inline-item">
			<a href="{{ path('order_index') }}" class="btn btn-secondary" title="{{ 'global.action.list'|trans }}" aria-label="{{ 'global.action.list'|trans }}">📃</a>
		</li>
		<li class="list-inline-item">
			<a href="{{ path('order_edit', {'id': order.id}) }}" class="btn btn-warning" title="{{ 'global.action.edit'|trans }}" aria-label="{{ 'global.action.edit'|trans }}">✏️</a>
		</li>
		<li class="list-inline-item">
			{{ include('order/_delete_form.html.twig') }}
		</li>
	</ul>
{% endblock %}
